logging.level:
  org.springframework.security.web.csrf.CsrfFilter: debug

management:
  endpoints:
    web:
      exposure:
        include: health, info, prometheus
spring:
  main:
    web-application-type:servlet
  jpa:
    hibernate:
      ddl-auto: create-drop
  ai:
    chat:
      memory:
        repository:
          jdbc:
            initialize-schema: always

  datasource:
    hikari:
      registerMbeans: true
      maximum-pool-size: 200
      hikari.minimum-idle: 5
      idle-timeout: 600000
      connection-timeout: 30000
      max-lifetime: 1800000
    url: jdbc:h2:mem:moneta
    username: sa
    password: sa
#    url: jdbc:postgresql://localhost:5432/postgres
#    username: postgres
#    password: postgres


  mcp:
    server:
      enabled: false
      name: moneta-agent
      transport:
        type: http
        endpoint: http://localhost:8080/mcp/task

mill:
  ai:
    chat:
      memory: in-memory
    nl2sql:
      enable: true
      dialect: H2
  security:
    enable: false
  metadata:
    # Legacy metadata configuration
    relations: file
    annotations: file
    file:
      repository:
        path: file:../../test/datasets/moneta/moneta-meta.yaml
    # New faceted metadata service (v2) - separate section
    v2:
      storage:
        type: file
      file:
        path: file:../../test/datasets/moneta/moneta-meta-repository.yaml
  backend:
    provider: jdbc
    connection:
      quoting: DOUBLE_QUOTE
      caseSensitive: true
      unquotedCasing: UNCHANGED
      fun: oracle
      conformance: ORACLE_12
    jdbc:
      url: "jdbc:h2:mem:test;INIT=RUNSCRIPT FROM '../../test/datasets/moneta/moneta.sql'"
      driver: "org.h2.Driver"
      username: "*"
      password: "*"
      target-schema: "MONETA"
  services:
    grinder:
      enable: true
    ai-nl2data:
      enable: true
    jet-http:
      enable: true
    data-bot:
      enable: false
      prompt-file: file:../../test/datasets/moneta/moneta.prompt
      model-name: gpt-4.1
