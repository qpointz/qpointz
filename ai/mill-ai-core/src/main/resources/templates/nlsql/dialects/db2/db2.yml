id: DB2
name: "IBM DB2"

notes: []

identifiers:
  case: UPPER
  quote: { start: "\"", end: "\"" }
  alias-quote: { start: "\"", end: "\"" }
  use-fully-qualified-names: true

literals:
  strings:
    quote: "'"
    concat: "||"
    escape: STANDARD
    note: "Use doubled single quote ('') to escape"
  booleans: ["1","0"]   # DB2 doesn't have native BOOLEAN, often emulated
  null: "NULL"
  dates-times:
    date:
      syntax: "DATE('YYYY-MM-DD')"
      quote: "'"
      pattern: "YYYY-MM-DD"
      notes:
        - "DB2 supports DATE literal via DATE() function."
    time:
      syntax: "TIME('HH:MI:SS')"
      quote: "'"
      pattern: "HH:MI:SS"
      notes:
        - "24-hour clock format"
    timestamp:
      syntax: "TIMESTAMP('YYYY-MM-DD HH:MI:SS')"
      quote: "'"
      pattern: "YYYY-MM-DD HH:MI:SS"
      notes:
        - "DB2 supports fractional seconds"
    interval:
      supported: true
      style: ANSI
      notes:
        - "INTERVAL syntax supported (e.g., 1 DAY, 2 MONTHS)"

joins:
  style: "explicit"
  cross-join:
    enabled: true
    keyword: "CROSS JOIN"
  inner-join:
    keyword: "INNER JOIN"
    require-on: true
    null-safe: false
  left-join:
    enabled: true
    keyword: "LEFT JOIN"
    null-safe: false
    require-on: true
  right-join:
    enabled: true
    keyword: "RIGHT JOIN"
    null-safe: false
    require-on: true
  full-join:
    keyword: "FULL OUTER JOIN"
    enabled: true
    null-safe: false
    require-on: true
  on-clause:
    keyword: "ON"
    require-condition: true

ordering:
  order-by-nulls: "NULLS LAST"

paging:
  limit: "FETCH FIRST {n} ROWS ONLY"
  offset: "OFFSET {m} ROWS"
  top: null

operators:
  equality:
    - { symbol: "=", description: "Equality comparison" }
  inequality:
    - { symbol: "<>", description: "Not equal" }
  comparison:
    - { symbol: ">", description: "Greater than" }
    - { symbol: ">=", description: "Greater than or equal" }
    - { symbol: "<", description: "Less than" }
    - { symbol: "<=", description: "Less than or equal" }
  arithmetic_operators:
    - { symbol: "+", description: "Addition" }
    - { symbol: "-", description: "Subtraction" }
    - { symbol: "*", description: "Multiplication" }
    - { symbol: "/", description: "Division" }
  null_checks:
    - { symbol: "IS NULL", description: "Check for null" }
    - { symbol: "IS NOT NULL", description: "Check for not null" }
  set:
    - { symbol: "IN", description: "Membership test" }
    - { symbol: "NOT IN", description: "Negated membership test" }
  logical:
    - { symbol: "NOT", description: "Logical NOT" }
    - { symbol: "AND", description: "Logical AND" }
    - { symbol: "OR", description: "Logical OR" }
  like:
    - { symbol: "LIKE", description: "Pattern match with wildcards" }
  between:
    - { symbol: "BETWEEN", description: "Inclusive range comparison" }
  casting:
    - { symbol: "CAST", syntax: "CAST({expr} AS {type})", description: "Explicit type cast", supported: true }
  regex:
    - { symbol: "REGEXP_LIKE", description: "Regex match function (DB2 11.1+)" }

functions:
  strings:
    - name: "SUBSTR"
      return: { type: STRING, nullable: true }
      syntax: "SUBSTR(string, start, length)"
      args:
        - { name: "string", type: STRING, required: true, notes: "Input string" }
        - { name: "start", type: INTEGER, required: true, notes: "Starting position (1-based)" }
        - { name: "length", type: INTEGER, required: false, notes: "Length of substring" }

    - name: "CONCAT"
      return: { type: STRING, nullable: true }
      syntax: "CONCAT(a, b)"
      args:
        - { name: "a", type: STRING, required: true, notes: "First string" }
        - { name: "b", type: STRING, required: true, notes: "Second string" }

  numerics:
    - name: "ROUND"
      return: { type: DECIMAL, nullable: true }
      syntax: "ROUND(num, scale)"
      args:
        - { name: "num", type: DECIMAL, required: true, notes: "Number to round" }
        - { name: "scale", type: INTEGER, required: false, notes: "Decimal places" }

    - name: "ABS"
      return: { type: DECIMAL, nullable: true }
      syntax: "ABS(num)"
      args:
        - { name: "num", type: DECIMAL, required: true, notes: "Input number" }

  aggregates:
    - name: "COUNT"
      return: { type: INTEGER, nullable: false }
      syntax: "COUNT(expr)"
      args:
        - { name: "expr", type: COLUMN_REF, required: false, default: "*", notes: "Expression or *" }

    - name: "AVG"
      return: { type: DECIMAL, nullable: true }
      syntax: "AVG(expr)"
      args:
        - { name: "expr", type: DECIMAL, required: true, notes: "Numeric expression" }

  dates_times:
    - name: "CURRENT_DATE"
      return: { type: DATE, nullable: false }
      syntax: "CURRENT DATE"
      args: []

    - name: "CURRENT_TIMESTAMP"
      return: { type: TIMESTAMP, nullable: false }
      syntax: "CURRENT TIMESTAMP"
      args: []

    - name: "TIMESTAMPADD"
      return: { type: TIMESTAMP, nullable: false }
      syntax: "TIMESTAMPADD(unit, value, ts)"
      args:
        - { name: "unit", type: ENUM, required: true, enum: ["DAY","HOUR","MINUTE","SECOND"], notes: "Time unit" }
        - { name: "value", type: INTEGER, required: true, notes: "Amount to add" }
        - { name: "ts", type: TIMESTAMP, required: true, notes: "Timestamp value" }

  conditionals:
    - name: "COALESCE"
      return: { type: STRING, nullable: true }
      syntax: "COALESCE(a, b, ...)"
      args:
        - { name: "a", type: STRING, required: true, variadic: true, notes: "Arguments to test" }

    - name: "NULLIF"
      return: { type: STRING, nullable: true }
      syntax: "NULLIF(a, b)"
      args:
        - { name: "a", type: STRING, required: true, notes: "First expression" }
        - { name: "b", type: STRING, required: true, notes: "Second expression" }
