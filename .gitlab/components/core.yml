include:
  - local: ${CI_PROJECT_DIR}/core/.gitlab-ci.yml
    rules:
      - if: '$CI_PIPELINE_SOURCE == "merge_request_event" && ($CI_MERGE_REQUEST_TARGET_BRANCH_NAME == "rc" || $CI_MERGE_REQUEST_TARGET_BRANCH_NAME == "main")'
      - if: '$CI_COMMIT_REF_PROTECTED == "true"'
      - changes:
          - .gitlab-ci.yml
          - .gitlab/**/*
          - build-logic/**/*
          - core/**/*
      - when: never
