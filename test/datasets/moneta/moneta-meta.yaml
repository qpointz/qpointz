model:
  name: Moneta test model
  description: Test model fictional financial database
schemas:
- name: moneta
  description: Client moneta schema
  tables:
  - name: clients
    attributes:
    - name: client_id
      type: int
      description: Unique identifier of the client.
    - name: first_name
      type: varchar
      description: Client's first name.
    - name: last_name
      type: varchar
      description: Client's last name.
    - name: email
      type: varchar
      description: Client email address.
    - name: phone
      type: varchar
      description: Client contact phone number.
    - name: created_at
      type: varchar
      description: Date when the client was registered.
    - name: country
      type: varchar
      description: Country of residence.
      value-mappings:
        context: Country name
        similarity-threshold: 0.4
        # mappings:
        #   - user-term: united states
        #     database-value: US
        #     display-value: United States
        #     language: en
        #     aliases: [usa, america, united states of america]
        #   - user-term: canada
        #     database-value: CA
        #     display-value: Canada
        #     language: en
        #     aliases: [ca]
        #   - user-term: united kingdom
        #     database-value: GB
        #     display-value: United Kingdom
        #     language: en
        #     aliases: [uk, great britain, britain]
        #   - user-term: germany
        #     database-value: DE
        #     display-value: Germany
        #     language: en
        #     aliases: [deutschland]
        #   - user-term: france
        #     database-value: FR
        #     display-value: France
        #     language: en
        #     aliases: [republique francaise]
        #   - user-term: italy
        #     database-value: IT
        #     display-value: Italy
        #     language: en
        #     aliases: [italia]
        #   - user-term: japan
        #     database-value: JP
        #     display-value: Japan
        #     language: en
        #     aliases: [nihon, nippon]
        #   - user-term: south korea
        #     database-value: KR
        #     display-value: South Korea
        #     language: en
        #     aliases: [korea, republic of korea, south korea]
        #   - user-term: korea
        #     database-value: KR
        #     display-value: South Korea
        #     language: en
        #     aliases: [south korea, republic of korea]
        #   - user-term: singapore
        #     database-value: SG
        #     display-value: Singapore
        #     language: en
        #     aliases: [sg]
        #   - user-term: australia
        #     database-value: AU
        #     display-value: Australia
        #     language: en
        #     aliases: [australian commonwealth]
        #   - user-term: switzerland
        #     database-value: CH
        #     display-value: Switzerland
        #     language: en
        #     aliases: [confederatio helvetica, swiss]
        #   - user-term: netherlands
        #     database-value: NL
        #     display-value: Netherlands
        #     language: en
        #     aliases: [holland, dutch]
        #   - user-term: hong kong
        #     database-value: HK
        #     display-value: Hong Kong
        #     language: en
        #     aliases: [hong kong sar, hk, hongkong]
        #   - user-term: vietnam
        #     database-value: VN
        #     display-value: Vietnam
        #     language: en
        #     aliases: [viet nam]
        sources:
        - type: sql
          name: country_values
          sql: >-
            SELECT DISTINCT "COUNTRY" AS "ID", 
                            "COUNTRY" AS "VALUE", 
                            "COUNTRY" AS "TEXT" 
            FROM "MONETA"."CLIENTS" 
            WHERE "COUNTRY" IS NOT NULL
          description: Discover all country values
          enabled: true
    - name: city
      type: varchar
      description: City of residence.
    - name: address
      type: varchar
      description: Street address of the client.
    - name: segment
      type: varchar
      description: Client service segment classification.
      value-mappings:
        context: Client segment
        similarity-threshold: 0.5
        sources:
        - type: sql
          name: segment_values
          sql: >-
            SELECT DISTINCT "SEGMENT" AS "ID", 
                            "SEGMENT" AS "VALUE", 
                            "SEGMENT" AS "TEXT" 
            FROM "MONETA"."CLIENTS" 
            WHERE "SEGMENT" IS NOT NULL
          description: Discover all segment values
          enabled: true
    description: Contains client personal and contact information.
  - name: accounts
    attributes:
    - name: account_id
      type: int
      description: ID of the associated bank account.
    - name: client_id
      type: int
      description: Unique identifier of the client.
    - name: account_type
      type: varchar
      description: Type of bank account (e.g., checking, savings).
    - name: balance
      type: decimal
      description: Current balance of the account.
    - name: opened_at
      type: varchar
      description: Date when the account was opened.
    description: Represents client bank accounts and balances.
  - name: transactions
    attributes:
    - name: transaction_id
      type: int
      description: Unique ID of the transaction.
    - name: account_id
      type: int
      description: ID of the associated bank account.
    - name: transaction_type
      type: varchar
      description: Type of transaction (deposit, withdrawal, transfer).
    - name: amount
      type: decimal
      description: Total loan amount.
    - name: transaction_date
      type: varchar
      description: Date of the transaction.
    - name: description
      type: varchar
      description: Text description of the transaction.
    description: Bank account transactions including deposits and withdrawals.
  - name: loans
    attributes:
    - name: loan_id
      type: int
      description: Unique ID of the loan.
    - name: client_id
      type: int
      description: Unique identifier of the client.
    - name: amount
      type: decimal
      description: Total loan amount.
    - name: interest_rate
      type: decimal
      description: Annual interest rate of the loan.
    - name: start_date
      type: varchar
      description: Loan start date.
    - name: end_date
      type: varchar
      description: Loan end date.
    - name: status
      type: varchar
      description: Order status (pending, executed, cancelled).
    description: Loan contracts issued to clients with interest and duration.
  - name: loan_payments
    attributes:
    - name: payment_id
      type: int
      description: Unique ID of the loan payment.
    - name: loan_id
      type: int
      description: Unique ID of the loan.
    - name: payment_date
      type: varchar
      description: Date of the payment.
    - name: amount
      type: decimal
      description: Total loan amount.
    description: Records payments made toward outstanding loans.
  - name: stock_portfolios
    attributes:
    - name: portfolio_id
      type: int
      description: Unique identifier of the portfolio.
    - name: client_id
      type: int
      description: Unique identifier of the client.
    - name: portfolio_name
      type: varchar
      description: Human-readable name of the portfolio.
    - name: created_at
      type: varchar
      description: Date when the client was registered.
    description: Client investment portfolios containing financial assets.
  - name: stocks
    attributes:
    - name: stock_id
      type: int
      description: Unique ID of the stock.
    - name: ticker
      type: varchar
      description: Stock market ticker symbol.
    - name: company_name
      type: varchar
      description: Name of the company issuing the stock.
    - name: sector
      type: varchar
      description: Industry sector of the stock.
    - name: exchange
      type: varchar
      description: Stock exchange where the stock is traded.
    description: Stock market instruments with tickers and sectors.
  - name: stock_holdings
    attributes:
    - name: holding_id
      type: int
      description: Unique ID of the holding entry.
    - name: portfolio_id
      type: int
      description: Unique identifier of the portfolio.
    - name: stock_id
      type: int
      description: Unique ID of the stock.
    - name: shares
      type: int
      description: Number of shares held.
    - name: average_price
      type: decimal
      description: Average price per share held.
    description: Detailed records of stocks held in each portfolio.
  - name: trade_orders
    attributes:
    - name: order_id
      type: int
      description: Unique ID of the trade order.
    - name: portfolio_id
      type: int
      description: Unique identifier of the portfolio.
    - name: stock_id
      type: int
      description: Unique ID of the stock.
    - name: order_type
      type: varchar
      description: Type of order (buy or sell).
    - name: order_date
      type: varchar
      description: Date when the order was placed.
    - name: shares
      type: int
      description: Number of shares held.
    - name: limit_price
      type: decimal
      description: Limit price for the trade order.
    - name: status
      type: varchar
      description: Order status (pending, executed, cancelled).
    description: Buy and sell orders placed for stocks within portfolios.
  references:
  - parent:
      table: clients
      attribute: client_id
    child:
      table: accounts
      attribute: client_id
    cardinality: 1-*
    description: client accounts
  - parent:
      table: accounts
      attribute: account_id
    child:
      table: transactions
      attribute: account_id
    cardinality: 1-*
  - parent:
      table: clients
      attribute: client_id
    child:
      table: loans
      attribute: client_id
    cardinality: 1-*
  - parent:
      table: loans
      attribute: loan_id
    child:
      table: loan_payments
      attribute: loan_id
    cardinality: 1-*
  - parent:
      table: clients
      attribute: client_id
    child:
      table: stock_portfolios
      attribute: client_id
    cardinality: 1-*
  - parent:
      table: stock_portfolios
      attribute: portfolio_id
    child:
      table: stock_holdings
      attribute: portfolio_id
    cardinality: 1-*
  - parent:
      table: stocks
      attribute: stock_id
    child:
      table: stock_holdings
      attribute: stock_id
    cardinality: 1-*
  - parent:
      table: stock_portfolios
      attribute: portfolio_id
    child:
      table: trade_orders
      attribute: portfolio_id
    cardinality: 1-*
  - parent:
      table: stocks
      attribute: stock_id
    child:
      table: trade_orders
      attribute: stock_id
    cardinality: 1-*
